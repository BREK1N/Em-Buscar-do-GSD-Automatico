{% extends 'informatica/base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="table-header">
    <h1>{{ page_title }}</h1>
    <div class="actions">
        <form method="get" class="search-form">
            <input type="text" name="q" placeholder="Pesquisar PATD..." value="{{ search_query }}">
            <button type="submit" class="search-btn" title="Pesquisar">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
            </button>
        </form>
        {# Não há botão de adicionar PATD aqui #}
    </div>
</div>

<div class="table-responsive">
    <table class="data-table">
        <thead>
            <tr>
                <th>N° PATD</th>
                <th>Militar Acusado</th>
                <th>Data da Ocorrência</th>
                <th>Status</th>
                <th>Oficial Responsável</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for patd in patds %}
            <tr>
                <td>{{ patd.numero_patd }}</td>
                <td>{{ patd.militar }}</td>
                <td>{{ patd.data_ocorrencia|date:"d/m/Y"|default:"-" }}</td>
                <td>{{ patd.get_status_display }}</td>
                <td>{{ patd.oficial_responsavel|default:"-" }}</td>
                <td class="actions-cell">
                    {# Link para a view de detalhes da Ouvidoria #}
                    <a href="{% url 'Ouvidoria:patd_detail' patd.pk %}" class="btn btn-sm btn-secondary" target="_blank">Ver Detalhes</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 20px;">Nenhuma PATD encontrada.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

 {% include 'informatica/includes/pagination.html' %} {# Reutilizar paginação #}
{% endblock %}